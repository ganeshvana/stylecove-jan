<odoo>
    <data>
        <record id="view_account_payment_form_inherit_" model = "ir.ui.view" >
        <field name="name">account.payment.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref = "account.view_account_payment_form"/>
        <field name="arch" type="xml" >
        	<xpath expr= "//button[@name='action_post']" position ="replace">
        		<button name="action_post" string="Confirm" type="object" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'draft')]}" data-hotkey="v" groups="oi_payment.group_payment_validate"/>
        	</xpath>
        	<xpath expr= "//field[@name='journal_id']" position ="after">
                <field name="sale_order_id" domain="[('partner_id','=',partner_id),('state','=','sale')]" attrs="{'invisible': [('payment_type','=', 'outbound')], 'readonly':[('state', '!=', 'draft')]}"/>
                <field name="reference" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                <field name="payment_mode" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                <field name="payment_term_line_ids" widget="many2many_tags" attrs="{'invisible': [('payment_type','=', 'outbound')], 'readonly':[('state', '!=', 'draft')]}"/>
                <field name="purchase_order_id" domain="[('partner_id','=',partner_id),('state','=','purchase')]" attrs="{'invisible': [('payment_type','=', 'inbound')], 'readonly':[('state', '!=', 'draft')]}"/>
                <field name="po_payment_term_line_ids" widget="many2many_tags" attrs="{'invisible': [('payment_type','=', 'inbound')]}"/>
            </xpath>
        </field>
    </record>
    
   <!--  <record id="view_incoterms_tree_inherit_" model = "ir.ui.view" >
        <field name="name">account.incoterms.inherit</field>
        <field name="model">account.incoterms</field>
        <field name="inherit_id" ref = "account.view_incoterms_tree"/>
        <field name="arch" type="xml">
        	<field name="name" position="after">
        		<field name="amount"/>
        	</field>
        </field>
   </record>
    -->
   <!-- <record id="view_payment_term_line_form_inherit_" model = "ir.ui.view" >
        <field name="name">account.payment.term.line.inherit</field>
        <field name="model">account.payment.term.line</field>
        <field name="inherit_id" ref = "account.view_payment_term_line_form"/>
        <field name="arch" type="xml">
        	<xpath expr="//group/group[2]" position="inside">
        		<field name="supply"/>
        		<field name="name"/>
        		<field name="desc"/>
        		<field name="supply_amount"/>
        		<field name="percentage"/>
        	</xpath>
        </field>
   </record> -->
    
    <record id="action_account_payments_user" model="ir.actions.act_window">
            <field name="name">Payments</field>
            <field name="res_model">account.payment</field>
            <field name="view_mode">tree,kanban,form,graph</field>
            <field name="domain">[('create_uid', '=', uid)]</field>
            <field name="context">{
                'default_payment_type': 'inbound',
                'default_partner_type': 'customer',
                'search_default_inbound_filter': 1,
                'default_move_journal_types': ('bank', 'cash'),
            }</field>
            <field name="view_id" ref="account.view_account_payment_tree"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                  Register a payment
                </p><p>
                  Payments are used to register liquidity movements. You can process those payments by your own means or by using installed facilities.
                </p>
            </field>
        </record>
    
   <!--  <menuitem id="sale_payment" name="Payment" action="action_account_payments_user" parent="sale.sale_order_menu" sequence="10"/>
 -->
 
 	<record id="vendor_invoice_form_inherit_taxi" model="ir.ui.view">
        <field name="name">account.move.invoice.form.inherit.insurance</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
        	<xpath expr="//button[@name='action_post'][2]" position="replace">
        		<button name="action_post" string="Confirm" class="oe_highlight" type="object" groups="oi_payment.group_vendorbill_validate" data-hotkey="v" attrs="{'invisible': ['|', '|', '|', ('state', '!=', 'draft'), ('auto_post', '=', True), ('move_type', '=', 'entry'), ('display_inactive_currency_warning','=',True)]}"/>
        	</xpath>
        	<xpath expr="//group[@id='other_tab_group']" position="inside">
        		<group attrs="{'invisible': [('move_type', '!=', 'out_invoice')]}">
        			<field name="delivery_challan_no" attrs="{'invisible': [('move_type', '!=', 'out_invoice')]}"/>
        			<field name="delivery_challan_date" />
	        		<field name="courier" attrs="{'invisible': [('move_type', '!=', 'out_invoice')]}"/>
	        		<field name="awb" />
	        		<field name="friegt"/>
	        		<field name="insurance"/>
	        		<field name="project_id"/>
	        		<field name="po_date"/>
        		</group>
        	</xpath>
        </field>
    </record>
 
    </data>
    
    <data noupdate="1">
		<record id="mail_template_payment_received" model="mail.template">
            <field name="name">Payment Received</field>
            <field name="model_id" ref="model_account_payment"/>
            <field name="email_from"></field>
            <field name="subject">Payment Received for SO {{ object.sale_order_id.name }}</field>
            <field name="email_to"></field>
            <field name="body_html" type="html">
                <p>
                Payment against SO <t t-esc="object.sale_order_id.name"/> , <t t-esc="object.currency_id.symbol"/> <t t-esc="object.amount"/> received.
                </p>
            </field>
        </record>
        
        <record id="project_seq" model="ir.sequence">
            <field name="name">project.code.seq</field>
            <field name="code">project.code.seq</field>
            <field name="active">True</field>
            <field name="prefix">NPR/</field>
            <field name="number_increment">1</field>
            <field name="number_next">1</field>
            <field name="padding">5</field>
        </record>
	</data>
</odoo>
